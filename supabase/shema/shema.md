| table_name               | columns                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| chat_conversation_memory | project_id uuid NOT NULL, summary text, identified_gaps jsonb DEFAULT '[]'::jsonb, pending_suggestions jsonb DEFAULT '[]'::jsonb, key_decisions jsonb DEFAULT '[]'::jsonb, recent_edits jsonb DEFAULT '[]'::jsonb, discussed_topics jsonb DEFAULT '[]'::jsonb, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now()                                                                                                                                                                                                                                         |
| chat_messages            | id uuid NOT NULL DEFAULT gen_random_uuid(), project_id uuid NOT NULL, role text NOT NULL, content text NOT NULL, tool_invocations jsonb DEFAULT '[]'::jsonb, created_at timestamp with time zone DEFAULT now(), sequence_number integer NOT NULL DEFAULT 0                                                                                                                                                                                                                                                                                                                                                  |
| chunk_citation_log       | id uuid NOT NULL DEFAULT gen_random_uuid(), chunk_id uuid NOT NULL, paper_id uuid NOT NULL, project_id uuid NOT NULL, section_type text, query_context text, was_cited boolean DEFAULT true, created_at timestamp with time zone DEFAULT now()                                                                                                                                                                                                                                                                                                                                                              |
| citations                | id uuid NOT NULL DEFAULT gen_random_uuid(), project_id uuid NOT NULL, paper_id uuid, key text NOT NULL, csl_json jsonb, citation_text text, context text, citation_number integer, first_seen_order integer, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now()                                                                                                                                                                                                                                                                                           |
| documents                | id uuid NOT NULL DEFAULT gen_random_uuid(), user_id uuid NOT NULL, title text NOT NULL, content text, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now()                                                                                                                                                                                                                                                                                                                                                                                                  |
| library_papers           | id uuid NOT NULL DEFAULT gen_random_uuid(), user_id uuid NOT NULL, paper_id uuid NOT NULL, collection text, tags ARRAY, notes text, added_at timestamp with time zone NOT NULL DEFAULT now()                                                                                                                                                                                                                                                                                                                                                                                                                |
| paper_chunks             | id uuid NOT NULL DEFAULT gen_random_uuid(), paper_id uuid NOT NULL, content text NOT NULL, embedding USER-DEFINED NOT NULL, chunk_index integer NOT NULL, created_at timestamp with time zone DEFAULT now(), content_tsv tsvector, metadata jsonb DEFAULT '{}'::jsonb                                                                                                                                                                                                                                                                                                                                       |
| paper_claims             | id uuid NOT NULL DEFAULT gen_random_uuid(), paper_id uuid NOT NULL, claim_text text NOT NULL, evidence_quote text, section text, claim_type text, confidence double precision DEFAULT 0.5, embedding USER-DEFINED, metadata jsonb DEFAULT '{}'::jsonb, created_at timestamp with time zone DEFAULT now()                                                                                                                                                                                                                                                                                                    |
| papers                   | id uuid NOT NULL DEFAULT gen_random_uuid(), title text NOT NULL, abstract text, authors jsonb, publication_date date, venue text, doi text, pdf_url text, pdf_content text, source text, citation_count integer DEFAULT 0, embedding USER-DEFINED NOT NULL, created_at timestamp with time zone NOT NULL DEFAULT now(), url text, metadata jsonb DEFAULT '{}'::jsonb                                                                                                                                                                                                                                        |
| processing_logs          | id uuid NOT NULL DEFAULT gen_random_uuid(), paper_id uuid, operation_type text NOT NULL, status text NOT NULL, error_message text, metadata jsonb, created_at timestamp with time zone DEFAULT now(), completed_at timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                 |
| profiles                 | id uuid NOT NULL, email text NOT NULL, full_name text, created_at timestamp with time zone NOT NULL DEFAULT now()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| project_analysis         | id uuid NOT NULL DEFAULT gen_random_uuid(), project_id uuid NOT NULL, analysis_type text NOT NULL, status text DEFAULT 'pending'::text, structured_output jsonb, markdown_output text, metadata jsonb DEFAULT '{}'::jsonb, created_at timestamp with time zone DEFAULT now(), completed_at timestamp with time zone                                                                                                                                                                                                                                                                                         |
| project_citations        | id uuid NOT NULL DEFAULT gen_random_uuid(), project_id uuid NOT NULL, paper_id uuid NOT NULL, citation_number integer, reason text, quote text, csl_json jsonb, created_at timestamp with time zone DEFAULT now(), cite_key text, first_seen_order integer, updated_at timestamp with time zone DEFAULT now()                                                                                                                                                                                                                                                                                               |
| project_evidence_usage   | id uuid NOT NULL DEFAULT gen_random_uuid(), project_id uuid NOT NULL, paper_id uuid NOT NULL, content_hash text NOT NULL, section_title text NOT NULL, content_preview text, created_at timestamp with time zone NOT NULL DEFAULT now()                                                                                                                                                                                                                                                                                                                                                                     |
| research_gaps            | id uuid NOT NULL DEFAULT gen_random_uuid(), project_id uuid NOT NULL, gap_type text NOT NULL, description text NOT NULL, evidence jsonb NOT NULL DEFAULT '[]'::jsonb, supporting_paper_ids ARRAY DEFAULT '{}'::uuid[], confidence double precision DEFAULT 0.5, created_at timestamp with time zone DEFAULT now()                                                                                                                                                                                                                                                                                           |
| research_projects        | id uuid NOT NULL DEFAULT gen_random_uuid(), user_id uuid NOT NULL, topic text NOT NULL, status text DEFAULT 'generating'::text, content text, generation_config jsonb, created_at timestamp with time zone NOT NULL DEFAULT now(), completed_at timestamp with time zone, generation_lock_id text, generation_lock_at timestamp with time zone, analysis_status text DEFAULT 'none'::text, updated_at timestamp with time zone DEFAULT now(), paper_type text DEFAULT 'literatureReview'::text, has_original_research boolean DEFAULT false, research_question text, key_findings text, citation_style text |
| user_preferences         | id uuid NOT NULL DEFAULT gen_random_uuid(), user_id uuid NOT NULL, citation_style text NOT NULL DEFAULT 'apa'::text, created_at timestamp with time zone NOT NULL DEFAULT now(), updated_at timestamp with time zone NOT NULL DEFAULT now()                                                                                                                                                                                                                                                                                                                                                                 |